Index: app/src/main/res/layout/fragment_ajustes.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@drawable/fondoajustes\"\r\n    tools:context=\".ui.AjustesFragment\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvNombreUsuarioAjustes\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"19dp\"\r\n            android:text=\"Alexsosa17\"\r\n            android:textColor=\"#FFFFFF\"\r\n            android:textSize=\"34sp\"\r\n            android:textStyle=\"bold\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/IvUserAvatar\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/IvUserAvatar\"\r\n            android:layout_width=\"150dp\"\r\n            android:layout_height=\"150dp\"\r\n            android:layout_marginTop=\"50dp\"\r\n            android:background=\"@drawable/background_rounded_corners\"\r\n            android:clipToOutline=\"true\"\r\n            android:foreground=\"@drawable/background_rounded_corners\"\r\n            android:scaleType=\"centerCrop\"\r\n            android:src=\"@drawable/appstore\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/datos1aj\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:background=\"@drawable/botonesstyle\"\r\n            android:paddingBottom=\"16dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/tvNombreUsuarioAjustes\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView2\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_marginStart=\"28dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:gravity=\"center_vertical\"\r\n                android:text=\"Actualizar Datos\"\r\n                android:textAllCaps=\"false\"\r\n                android:textColor=\"#FFFFFF\"\r\n                android:textSize=\"16sp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/flechaDes1\"\r\n                android:layout_width=\"38dp\"\r\n                android:layout_height=\"38dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:background=\"@drawable/botonflecha\"\r\n                android:rotation=\"-90\"\r\n                android:src=\"@drawable/flechadown\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:id=\"@+id/cl1ajustes\"\r\n                android:layout_width=\"289dp\"\r\n                android:layout_height=\"144dp\"\r\n                android:visibility=\"gone\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/flechaDes1\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/lineaRojaBtn1\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"3dp\"\r\n                    android:layout_marginStart=\"20dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:layout_marginEnd=\"80dp\"\r\n                    android:visibility=\"visible\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\"\r\n                    tools:src=\"@drawable/linea_roja\" />\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n\r\n            android:id=\"@+id/datos2aj\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:background=\"@drawable/botonesstyle\"\r\n            android:paddingBottom=\"16dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/datos1aj\">\r\n\r\n            <TextView\r\n\r\n                android:id=\"@+id/textView3\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_marginStart=\"28dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:gravity=\"center_vertical\"\r\n                android:text=\"Cambiar idioma\"\r\n                android:textAllCaps=\"false\"\r\n                android:textColor=\"#FFFFFF\"\r\n                android:textSize=\"16sp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <ImageView\r\n\r\n                android:id=\"@+id/flechaDes2\"\r\n                android:layout_width=\"38dp\"\r\n                android:layout_height=\"38dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"16dp\"\r\n                android:background=\"@drawable/botonflecha\"\r\n                android:rotation=\"-90\"\r\n                android:src=\"@drawable/flechadown\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n\r\n                android:id=\"@+id/clajustes2\"\r\n                android:layout_width=\"289dp\"\r\n                android:layout_height=\"144dp\"\r\n                android:visibility=\"gone\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView3\">\r\n\r\n                <ImageView\r\n\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"3dp\"\r\n                    android:layout_marginStart=\"20dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:layout_marginEnd=\"80dp\"\r\n                    android:visibility=\"visible\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\"\r\n                    tools:src=\"@drawable/linea_roja\" />\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n\r\n            android:id=\"@+id/datos3aj\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:background=\"@drawable/botonesstyle\"\r\n            android:paddingBottom=\"16dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/datos2aj\">\r\n\r\n            <TextView\r\n\r\n                android:id=\"@+id/textView4\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_marginStart=\"28dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:gravity=\"center_vertical\"\r\n                android:text=\"Cambiar tema\"\r\n                android:textAllCaps=\"false\"\r\n                android:textColor=\"#FFFFFF\"\r\n                android:textSize=\"16sp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <ImageView\r\n\r\n                android:id=\"@+id/flechaDes3\"\r\n                android:layout_width=\"38dp\"\r\n                android:layout_height=\"38dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"16dp\"\r\n                android:background=\"@drawable/botonflecha\"\r\n                android:rotation=\"-90\"\r\n                android:src=\"@drawable/flechadown\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n\r\n                android:id=\"@+id/clajsutes3\"\r\n                android:layout_width=\"289dp\"\r\n                android:layout_height=\"144dp\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:visibility=\"gone\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView4\">\r\n\r\n                <ImageView\r\n\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"3dp\"\r\n                    android:layout_marginStart=\"20dp\"\r\n                    android:layout_marginEnd=\"80dp\"\r\n                    android:visibility=\"visible\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\"\r\n                    tools:src=\"@drawable/linea_roja\" />\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n\r\n            android:id=\"@+id/datos4aj\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:background=\"@drawable/botonesstyle\"\r\n            android:paddingBottom=\"16dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/datos3aj\">\r\n\r\n            <TextView\r\n\r\n                android:id=\"@+id/textView5\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_marginStart=\"28dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:gravity=\"center_vertical\"\r\n                android:text=\"Cerrar sesión\"\r\n                android:textAllCaps=\"false\"\r\n                android:textColor=\"#FFFFFF\"\r\n                android:textSize=\"16sp\"\r\n                android:textStyle=\"bold\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <ImageView\r\n\r\n                android:id=\"@+id/flechaDes4\"\r\n                android:layout_width=\"38dp\"\r\n                android:layout_height=\"38dp\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_marginEnd=\"16dp\"\r\n                android:background=\"@drawable/botonflecha\"\r\n                android:rotation=\"-90\"\r\n                android:src=\"@drawable/flechadown\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n\r\n                android:id=\"@+id/clajsutes4\"\r\n                android:layout_width=\"289dp\"\r\n                android:layout_height=\"144dp\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:visibility=\"gone\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/textView5\">\r\n\r\n                <ImageView\r\n\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"3dp\"\r\n                    android:layout_marginStart=\"20dp\"\r\n                    android:layout_marginEnd=\"80dp\"\r\n                    android:visibility=\"visible\"\r\n                    app:layout_constraintEnd_toEndOf=\"parent\"\r\n                    app:layout_constraintStart_toStartOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\"\r\n                    tools:src=\"@drawable/linea_roja\" />\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageView\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"109dp\"\r\n            android:layout_marginTop=\"110dp\"\r\n            android:layout_marginEnd=\"9dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:alpha=\".7\"\r\n            android:background=\"@drawable/background_rounded_corners_edit\"\r\n            android:src=\"@drawable/iconeditar\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/IvUserAvatar\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/IvUserAvatar\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/IvUserAvatar\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/IvUserAvatar\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_ajustes.xml b/app/src/main/res/layout/fragment_ajustes.xml
--- a/app/src/main/res/layout/fragment_ajustes.xml	
+++ b/app/src/main/res/layout/fragment_ajustes.xml	
@@ -81,26 +81,22 @@
 
             <androidx.constraintlayout.widget.ConstraintLayout
                 android:id="@+id/cl1ajustes"
-                android:layout_width="289dp"
-                android:layout_height="144dp"
+                android:layout_width="285dp"
+                android:layout_height="78dp"
                 android:visibility="gone"
                 app:layout_constraintBottom_toBottomOf="parent"
                 app:layout_constraintEnd_toEndOf="parent"
-                app:layout_constraintStart_toStartOf="parent"
-                app:layout_constraintTop_toBottomOf="@+id/flechaDes1">
+                app:layout_constraintStart_toStartOf="parent">
 
-                <ImageView
-                    android:id="@+id/lineaRojaBtn1"
-                    android:layout_width="0dp"
-                    android:layout_height="3dp"
-                    android:layout_marginStart="20dp"
-                    android:layout_marginTop="8dp"
-                    android:layout_marginEnd="80dp"
-                    android:visibility="visible"
+                <TextView
+                    android:id="@+id/textView14"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_marginTop="24dp"
+                    android:text="Hola"
                     app:layout_constraintEnd_toEndOf="parent"
                     app:layout_constraintStart_toStartOf="parent"
-                    app:layout_constraintTop_toTopOf="parent"
-                    tools:src="@drawable/linea_roja" />
+                    app:layout_constraintTop_toTopOf="parent" />
             </androidx.constraintlayout.widget.ConstraintLayout>
 
         </androidx.constraintlayout.widget.ConstraintLayout>
Index: app/src/main/res/layout/fragment_register.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@drawable/fotomancuerna\"\r\n    android:fitsSystemWindows=\"true\"\r\n    tools:context=\".ui.RegisterFragment\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/IvUserAvatar\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"0dp\"\r\n            android:layout_marginTop=\"100dp\"\r\n            android:scaleType=\"fitXY\"\r\n            android:src=\"@drawable/fondorojohd\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            app:layout_constraintVertical_bias=\"1.0\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"53dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:text=\"Regístrate\"\r\n            android:textColor=\"#FFFFFF\"\r\n            android:textSize=\"38sp\"\r\n            android:textStyle=\"bold\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/textView8\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.497\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/etnombreuserrg\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:background=\"@drawable/edit_text_border\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Nombre Usuario\"\r\n            android:inputType=\"text\"\r\n            android:padding=\"10dp\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/textView10\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/etemailrg\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:background=\"@drawable/edit_text_border\"\r\n            android:ems=\"10\"\r\n            android:hint=\"email@example.com\"\r\n            android:inputType=\"textEmailAddress\"\r\n            android:padding=\"10dp\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/textView11\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/etpassrg\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:layout_marginBottom=\"40dp\"\r\n            android:background=\"@drawable/edit_text_border\"\r\n            android:ems=\"10\"\r\n            android:hint=\"contraseña 6 caracteres minimo\"\r\n            android:inputType=\"textPassword\"\r\n            android:padding=\"10dp\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/btnaceptarrg\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btnaceptarrg\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"51dp\"\r\n            android:layout_marginStart=\"60dp\"\r\n            android:layout_marginEnd=\"60dp\"\r\n            android:layout_marginBottom=\"52dp\"\r\n            android:backgroundTint=\"#B7261E\"\r\n            android:text=\"registrarse\"\r\n            android:textAlignment=\"center\"\r\n            android:textSize=\"20sp\"\r\n            app:cornerRadius=\"10dp\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/btncancel\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"1.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/btncancel\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"16dp\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            android:backgroundTint=\"#737373\"\r\n            android:text=\"volver\"\r\n            android:textSize=\"14sp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView8\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"11dp\"\r\n            android:text=\"¿Ya tienes una cuenta? Inicia sesión aqui\"\r\n            android:textColor=\"#B7261E\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/textView9\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView9\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"2dp\"\r\n            android:text=\"Nombre\"\r\n            android:textColor=\"#FFFFFF\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/etnombreuserrg\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.175\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView10\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"2dp\"\r\n            android:text=\"Email\"\r\n            android:textColor=\"#FFFFFF\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/etemailrg\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.17\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView11\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"2dp\"\r\n            android:text=\"Contraseña\"\r\n            android:textColor=\"#FFFFFF\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/etpassrg\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.19\"\r\n            app:layout_constraintStart_toStartOf=\"parent\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_register.xml b/app/src/main/res/layout/fragment_register.xml
--- a/app/src/main/res/layout/fragment_register.xml	
+++ b/app/src/main/res/layout/fragment_register.xml	
@@ -13,7 +13,6 @@
         android:layout_height="match_parent">
 
         <ImageView
-            android:id="@+id/IvUserAvatar"
             android:layout_width="0dp"
             android:layout_height="0dp"
             android:layout_marginTop="100dp"
Index: app/src/main/java/net/azarquiel/appgym/ui/AjustesFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package net.azarquiel.appgym.ui\r\n\r\nimport android.Manifest\r\nimport android.animation.ValueAnimator\r\nimport android.transition.TransitionManager\r\nimport android.app.Activity\r\nimport android.app.Dialog\r\nimport android.content.ContentValues\r\nimport android.content.ContentValues.TAG\r\nimport android.content.Context\r\nimport android.content.Context.MODE_PRIVATE\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport android.content.pm.PackageManager\r\nimport android.graphics.Bitmap\r\nimport android.graphics.Canvas\r\nimport android.graphics.Color\r\nimport android.net.Uri\r\nimport android.os.Build\r\nimport android.os.Bundle\r\nimport android.os.Environment\r\nimport android.provider.MediaStore\r\nimport android.transition.Fade\r\nimport android.util.Log\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Button\r\nimport android.widget.ImageView\r\nimport android.widget.LinearLayout\r\nimport android.widget.TextView\r\nimport android.widget.Toast\r\nimport androidx.activity.result.ActivityResultLauncher\r\nimport androidx.activity.result.contract.ActivityResultContracts\r\nimport androidx.appcompat.app.AlertDialog\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.constraintlayout.widget.ConstraintLayout\r\nimport androidx.core.app.ActivityCompat\r\nimport androidx.core.content.ContextCompat\r\nimport androidx.core.net.toUri\r\nimport androidx.fragment.app.Fragment\r\nimport com.google.android.material.button.MaterialButton\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.FirebaseUser\r\nimport com.google.firebase.firestore.FirebaseFirestore\r\nimport com.google.firebase.storage.FirebaseStorage\r\nimport com.squareup.picasso.Picasso\r\nimport net.azarquiel.appgym.R\r\nimport net.azarquiel.appgym.databinding.FragmentAjustesBinding\r\nimport java.io.ByteArrayOutputStream\r\nimport java.io.File\r\nimport java.io.FileOutputStream\r\nimport java.io.OutputStream\r\nimport java.text.SimpleDateFormat\r\nimport java.util.Date\r\nimport java.util.Locale\r\n\r\nclass AjustesFragment : Fragment() {\r\n\r\n    private lateinit var datos: ConstraintLayout\r\n    private lateinit var flecha: ImageView\r\n    private lateinit var binding: FragmentAjustesBinding\r\n    private lateinit var imageUrl: String\r\n    private lateinit var dialog: Dialog\r\n    private var userlocal: FirebaseUser?=null\r\n    private lateinit var IvUserAvatar: ImageView\r\n    private lateinit var launcherImage : ActivityResultLauncher<Intent>\r\n    private lateinit var auth: FirebaseAuth\r\n    private lateinit var db: FirebaseFirestore\r\n    private lateinit var root: View\r\n    private lateinit var btnCamara: Button\r\n    private lateinit var btnGalery: Button\r\n    private val CAMERA_PERMISSION_REQUEST_CODE = 100\r\n    private lateinit var datosUserSH: SharedPreferences\r\n    private var isExpanded = false\r\n    private var isExpanded1 = false\r\n    private var isExpanded2 = false\r\n    private var isExpanded3 = false\r\n    private var isExpanded4 = false\r\n\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        binding = FragmentAjustesBinding.inflate(inflater, container, false)\r\n        val root = binding.root\r\n        return root\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        auth = FirebaseAuth.getInstance()\r\n        db = FirebaseFirestore.getInstance()\r\n        datosUserSH = requireActivity().getSharedPreferences(\"datosUserSh\", MODE_PRIVATE)\r\n        getUser()\r\n        val imageUrl = datosUserSH.getString(\"imageUrl\", null)\r\n        val username = datosUserSH.getString(\"username\",null)\r\n        if (!imageUrl.isNullOrEmpty()) {\r\n            Picasso.get().load(imageUrl).into(binding.IvUserAvatar)\r\n        }\r\n        if (!username.isNullOrEmpty()) {\r\n            binding.tvNombreUsuarioAjustes.setText(username)\r\n        }\r\n        binding.IvUserAvatar.setOnClickListener {\r\n            if (userlocal != null) {\r\n                openDialog()\r\n            } else {\r\n                msg(\"Inicia sesión o regístrate\")\r\n            }\r\n        }\r\n\r\n        binding.datos1aj.setOnClickListener {\r\n            expandir(1)\r\n            isExpanded1 = !isExpanded1\r\n        }\r\n\r\n        binding.datos2aj.setOnClickListener {\r\n            expandir(2)\r\n            isExpanded2 = !isExpanded2\r\n        }\r\n\r\n        binding.datos3aj.setOnClickListener {\r\n            expandir(3)\r\n            isExpanded3 = !isExpanded3\r\n        }\r\n\r\n        binding.datos4aj.setOnClickListener {\r\n            expandir(4)\r\n            isExpanded4 = !isExpanded4\r\n        }\r\n\r\n        onResultImage()\r\n    }\r\n\r\n\r\n\r\n    private fun expandir(id:Int) {\r\n        cerrar2(id)\r\n        when(id){\r\n            1->{\r\n                datos=binding.datos1aj\r\n                flecha=binding.flechaDes1\r\n                isExpanded=isExpanded1\r\n            }\r\n            2->{\r\n                datos=binding.datos2aj\r\n                flecha=binding.flechaDes2\r\n                isExpanded=isExpanded2\r\n            }\r\n            3->{\r\n                datos=binding.datos3aj\r\n                flecha=binding.flechaDes3\r\n                isExpanded=isExpanded3\r\n            }\r\n            4->{\r\n                datos=binding.datos4aj\r\n                flecha=binding.flechaDes4\r\n                isExpanded=isExpanded4\r\n            }\r\n        }\r\n        // Variable para mantener el estado actual de la animación\r\n        val layoutParams = datos.layoutParams as ConstraintLayout.LayoutParams\r\n\r\n        // Calcular la altura final deseada\r\n        val startHeight = datos.height\r\n        val endHeight = if (isExpanded) 200 else 500 // Altura final deseada en píxeles\r\n        val duration = 1000L // Duración de la animación en milisegundos\r\n\r\n        // Crear un ValueAnimator para cambiar la altura del ConstraintLayout\r\n        val animator = ValueAnimator.ofInt(startHeight, endHeight)\r\n        animator.duration = duration\r\n\r\n        // Cambiar la rotación de la flecha\r\n        val rotation = if (isExpanded) -90f else 0f // Rotación deseada de la flecha\r\n        flecha.animate().rotation(rotation).start()\r\n\r\n        // Actualizar la altura del ConstraintLayout durante la animación\r\n        animator.addUpdateListener { animation ->\r\n            val animatedValue = animation.animatedValue as Int\r\n            layoutParams.height = animatedValue\r\n            datos.layoutParams = layoutParams\r\n\r\n        }\r\n        // Iniciar la animación\r\n        animator.start()\r\n        Log.d(\"expandir\",\" \"+isExpanded)\r\n    }\r\n\r\n    private fun cerrar2(id: Int) {\r\n        val expandirIds = arrayOf(1, 2, 3, 4) // IDs de los elementos a expandir\r\n\r\n        for (expandirId in expandirIds) {\r\n            if (expandirId != id) {\r\n                // Si el ID actual no es igual al ID del elemento que se va a expandir, cerrar el elemento\r\n                val isExpanded = when (expandirId) {\r\n                    1 -> isExpanded1\r\n                    2 -> isExpanded2\r\n                    3 -> isExpanded3\r\n                    4 -> isExpanded4\r\n                    else -> false\r\n                }\r\n\r\n                if (isExpanded) {\r\n                    cerrar(expandirId)\r\n                    when (expandirId) {\r\n                        1 -> isExpanded1 = false\r\n                        2 -> isExpanded2 = false\r\n                        3 -> isExpanded3 = false\r\n                        4 -> isExpanded4 = false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private fun cerrar(id: Int) {\r\n        // Cerrar el elemento correspondiente\r\n        when (id) {\r\n            1 -> expandir(1)\r\n            2 -> expandir(2)\r\n            3 -> expandir(3)\r\n            4 -> expandir(4)\r\n        }\r\n    }\r\n    private fun openDialog() {\r\n        val builder = AlertDialog.Builder(requireContext())\r\n        val inflater = layoutInflater\r\n        val dialogView = inflater.inflate(R.layout.dialog_creator, null)\r\n\r\n        btnCamara = dialogView.findViewById<Button>(R.id.btnCamara)\r\n        btnGalery = dialogView.findViewById<Button>(R.id.btnGalery)\r\n\r\n        btnGalery.setOnClickListener { onClickOpenGalery() }\r\n        btnCamara.setOnClickListener { onClickOpenCamara() }\r\n        builder.setView(dialogView)\r\n            .setTitle(\"Agregar imagen desde: \")\r\n            .setNegativeButton(\"Cancelar\") { dialog, id ->\r\n                // Acciones a realizar al hacer clic en \"Cancelar\"\r\n            }\r\n\r\n        dialog = builder.create()\r\n        dialog.show()\r\n    }\r\n\r\n    fun onClickOpenGalery() {\r\n            selectImage()\r\n    }\r\n    fun onClickOpenCamara() {\r\n        // Verificar si el permiso de la cámara ya está concedido\r\n        if (ContextCompat.checkSelfPermission(\r\n                requireContext(),\r\n                Manifest.permission.CAMERA\r\n            ) != PackageManager.PERMISSION_GRANTED\r\n        ) {\r\n            // Si el permiso no está concedido, solicitarlo al usuario\r\n            ActivityCompat.requestPermissions(\r\n                requireActivity(),\r\n                arrayOf(Manifest.permission.CAMERA),\r\n                CAMERA_PERMISSION_REQUEST_CODE\r\n            )\r\n        } else {\r\n            // El permiso ya está concedido, puedes iniciar la actividad de la cámara\r\n            dispatchTakePictureIntent()\r\n        }\r\n    }\r\n\r\n    private fun getUser() {\r\n        val currentUser = auth.currentUser\r\n        userlocal = currentUser!!\r\n        if (userlocal != null) {\r\n            val userDocument = userlocal?.email?.let { db.collection(\"users\").document(it) }\r\n\r\n            userDocument!!.get()\r\n                .addOnSuccessListener { document ->\r\n                    if (document.exists()) {\r\n\r\n                    } else {\r\n                        // El documento no existe, maneja esta situación según tus requerimientos\r\n                    }\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    // Maneja cualquier error que pueda ocurrir al realizar la consulta\r\n                    Log.w(ContentValues.TAG, \"Error al obtener datos del usuario: \", e)\r\n                }\r\n        } else {\r\n            // El usuario no está autenticado, maneja esta situación según tus requerimientos\r\n        }\r\n    }\r\n\r\n    private fun uploadImage(imageUri: Uri) {\r\n        val sdf = SimpleDateFormat(\"yyyy_M_dd_HH_mm_ss\", Locale.getDefault())\r\n        val now = Date()\r\n        val filename = sdf.format(now)\r\n        val storageReference = FirebaseStorage.getInstance().getReference(\"FotosUsers/$filename ${userlocal!!.email}\")\r\n        storageReference.putFile(imageUri)\r\n            .addOnSuccessListener { taskSnapshot ->\r\n                storageReference.downloadUrl.addOnSuccessListener { uri ->\r\n                    auth.currentUser?.let { user ->\r\n                        val userUpdates = hashMapOf<String, Any>(\r\n                            \"imageUrl\" to uri.toString()\r\n                        )\r\n                        meterDatosUser(uri.toString())\r\n                        db.collection(\"users\").document(user.email!!).update(userUpdates)\r\n                            .addOnSuccessListener {\r\n                                Log.d(\"UploadImage\", \"URL de imagen guardada en la base de datos\")\r\n                            }\r\n                            .addOnFailureListener { e ->\r\n                                Log.e(\"UploadImage\", \"Error al guardar URL de imagen en la base de datos: $e\")\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n            .addOnFailureListener { e ->\r\n                msg(\"Error al subir la imagen: ${e.message}\")\r\n            }\r\n    }\r\n\r\n    private fun selectImage() {\r\n        val intent = Intent()\r\n        intent.type = \"image/*\"\r\n        intent.action = Intent.ACTION_GET_CONTENT\r\n        launcherImage.launch(intent)\r\n    }\r\n\r\n    private fun onResultImage() {\r\n        launcherImage = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result ->\r\n            if (result.resultCode == AppCompatActivity.RESULT_OK) {\r\n                result.data?.let { intent ->\r\n                    intent.data?.let { uri ->\r\n                        binding.IvUserAvatar.setImageURI(uri)\r\n                        uploadImage(uri)\r\n                        (dialog as AlertDialog).dismiss()\r\n                    }\r\n                }\r\n            }\r\n            // Si la captura de imagen es exitosa\r\n            if (result.data?.extras?.containsKey(\"data\") == true) {\r\n                // Obtener la imagen capturada como bitmap\r\n                val imageBitmap = result.data?.extras?.get(\"data\") as Bitmap\r\n                // Establecer la imagen capturada en el ImageView\r\n                binding.IvUserAvatar.setImageBitmap(imageBitmap)\r\n                // Obtener la URI de la imagen capturada\r\n                val tempUri = getImageUri(requireContext(), imageBitmap)\r\n                // Subir la imagen a Firebase\r\n                uploadImage(tempUri)\r\n                // Cerrar el diálogo\r\n                (dialog as AlertDialog).dismiss()\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun msg(s: String) {\r\n\r\n    }\r\n\r\n    private fun getImageUri(inContext: Context, inImage: Bitmap): Uri {\r\n        val bytes = ByteArrayOutputStream()\r\n        inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes)\r\n        val path = MediaStore.Images.Media.insertImage(inContext.contentResolver, inImage, \"Title\", null)\r\n        return Uri.parse(path)\r\n    }\r\n\r\n    private fun dispatchTakePictureIntent() {\r\n        // Creamos un intent para capturar una imagen\r\n        val takePictureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\r\n        // Verificamos si hay una actividad que pueda manejar este intent\r\n        takePictureIntent.resolveActivity(requireActivity().packageManager)?.also {\r\n            // Utilizamos el registro de actividad para el resultado\r\n            launcherImage.launch(takePictureIntent)\r\n        }\r\n    }\r\n    //SharePreferences\r\n    private fun meterDatosUser(imageUrl:String) {\r\n        var editor = datosUserSH.edit()\r\n        editor.putString(\"imageUrl\", imageUrl)\r\n        editor.commit()\r\n    }\r\n\r\n\r\n}\r\n/*\r\n    private fun saveBitmapImage(bitmap: Bitmap) {\r\n        val timestamp = System.currentTimeMillis()\r\n        val values = ContentValues()\r\n        values.put(MediaStore.Images.Media.MIME_TYPE, \"image/png\")\r\n        values.put(MediaStore.Images.Media.DATE_ADDED, timestamp)\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {\r\n            values.put(MediaStore.Images.Media.DATE_TAKEN, timestamp)\r\n            values.put(MediaStore.Images.Media.RELATIVE_PATH, \"Pictures/\" + getString(R.string.app_name))\r\n            values.put(MediaStore.Images.Media.IS_PENDING, true)\r\n            val uri = requireActivity().contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)\r\n            if (uri != null) {\r\n                try {\r\n                    val outputStream = requireActivity().contentResolver.openOutputStream(uri)\r\n                    if (outputStream != null) {\r\n                        try {\r\n                            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream)\r\n                            outputStream.close()\r\n                        } catch (e: Exception) {\r\n                            Log.e(TAG, \"saveBitmapImage: \", e)\r\n                        }\r\n                    }\r\n                    values.put(MediaStore.Images.Media.IS_PENDING, false)\r\n                    requireActivity().contentResolver.update(uri, values, null, null)\r\n                    Toast.makeText(requireContext(), \"Saved...\", Toast.LENGTH_SHORT).show()\r\n                } catch (e: Exception) {\r\n                    Log.e(TAG, \"saveBitmapImage: \", e)\r\n                }\r\n            }\r\n        } else {\r\n            val imageFileFolder = File(Environment.getExternalStorageDirectory().toString() + '/' + getString(R.string.app_name))\r\n            if (!imageFileFolder.exists()) {\r\n                imageFileFolder.mkdirs()\r\n            }\r\n            val mImageName = \"$timestamp.png\"\r\n            val imageFile = File(imageFileFolder, mImageName)\r\n            try {\r\n                val outputStream: OutputStream = FileOutputStream(imageFile)\r\n                try {\r\n                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream)\r\n                    outputStream.close()\r\n                } catch (e: Exception) {\r\n                    Log.e(TAG, \"saveBitmapImage: \", e)\r\n                }\r\n                values.put(MediaStore.Images.Media.DATA, imageFile.absolutePath)\r\n                requireActivity().contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)\r\n                Toast.makeText(requireContext(), \"Saved...\", Toast.LENGTH_SHORT).show()\r\n            } catch (e: Exception) {\r\n                Log.e(TAG, \"saveBitmapImage: \", e)\r\n            }\r\n        }\r\n    }\r\n\r\nclass AjustesFragment : Fragment() {\r\n\r\n    private lateinit var dialog: Dialog\r\n    private var userlocal: FirebaseUser?=null\r\n    private lateinit var IvUserAvatar: ImageView\r\n    private lateinit var launcherImage : ActivityResultLauncher<Intent>\r\n    private lateinit var auth: FirebaseAuth\r\n    private lateinit var db: FirebaseFirestore\r\n    private lateinit var root: View\r\n    private lateinit var btnCamara: Button\r\n    private lateinit var btnGalery: Button\r\n    private val REQUEST_IMAGE_CAPTURE = 1\r\n    private val CAMERA_PERMISSION_REQUEST_CODE = 100\r\n\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        root= inflater.inflate(R.layout.fragment_ajustes, container, false)\r\n        return root\r\n\r\n    }\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        auth = Firebase.auth\r\n        db = Firebase.firestore\r\n        getUser()\r\n        IvUserAvatar=root.findViewById<ImageView>(R.id.IvUserAvatar)\r\n\r\n        IvUserAvatar.setOnClickListener {\r\n            if (userlocal != null) {\r\n                openDialog()\r\n\r\n            }else{\r\n                msg(\"Inicia sesion o registrate\")\r\n            }\r\n        }\r\n\r\n        onResultImage()\r\n    }\r\n\r\n    private fun openDialog() {\r\n        val builder = AlertDialog.Builder(requireContext())\r\n        val inflater = layoutInflater\r\n        val dialogView = inflater.inflate(R.layout.dialog_creator, null)\r\n\r\n        btnCamara=dialogView.findViewById<Button>(R.id.btnCamara)\r\n        btnGalery=dialogView.findViewById<Button>(R.id.btnGalery)\r\n\r\n\r\n        btnGalery.setOnClickListener {onClickOpenGalery() }\r\n        builder.setView(dialogView)\r\n            .setTitle(\"Agregar imagen desde: \")\r\n\r\n\r\n            .setNegativeButton(\"Cancelar\") { dialog, id ->\r\n                // Acciones a realizar al hacer clic en \"Cancelar\"\r\n            }\r\n\r\n\r\n        dialog = builder.create()\r\n        dialog.show()\r\n    }\r\n    fun onClickOpenGalery(){\r\n        selectImage()\r\n    }\r\n    private fun getUser() {\r\n        // Obtén el usuario autenticado\r\n        val currentUser = auth.currentUser\r\n        userlocal=currentUser\r\n        if (userlocal != null) {\r\n            val userDocument = userlocal?.email?.let { db.collection(\"users\").document(it) }\r\n\r\n            userDocument!!.get()\r\n                .addOnSuccessListener { document ->\r\n                    if (document.exists()) {\r\n                        // El documento existe, obtén los datos del usuario\r\n                        val imageUrl = document.getString(\"imageUrl\")\r\n\r\n\r\n                    } else {\r\n                        // El documento no existe, maneja esta situación según tus requerimientos\r\n                    }\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    // Maneja cualquier error que pueda ocurrir al realizar la consulta\r\n                    Log.w(\"TAG\", \"Error al obtener datos del usuario: \", e)\r\n                }\r\n        } else {\r\n            // El usuario no está autenticado, maneja esta situación según tus requerimientos\r\n        }\r\n    }\r\n// Función para mostrar la pantalla principal de la aplicación\r\n\r\n    private fun uploadImage(imageUri: Uri) {\r\n        // Fin ProgressBar\r\n        val sdf = SimpleDateFormat(\"yyyy_M_dd_HH_mm_ss\", Locale.getDefault())\r\n        val now = Date()\r\n        val filename = sdf.format(now)\r\n        val storageReference = FirebaseStorage.getInstance().getReference(\"FotosUsers/$filename ${userlocal!!.email}\")\r\n        storageReference.putFile(imageUri)\r\n            .addOnSuccessListener { taskSnapshot ->\r\n                // Obtener la URL de la imagen después de subirla\r\n                storageReference.downloadUrl.addOnSuccessListener { uri ->\r\n                    // Guardar la URL de la imagen en el usuario actual\r\n                    auth.currentUser?.let { user ->\r\n                        val userUpdates = hashMapOf<String, Any>(\r\n                            \"imageUrl\" to uri.toString()\r\n                        )\r\n                        db.collection(\"users\").document(user.email!!).update(userUpdates)\r\n                            .addOnSuccessListener {\r\n                                Log.d(\"UploadImage\", \"URL de imagen guardada en la base de datos\")\r\n                            }\r\n                            .addOnFailureListener { e ->\r\n                                Log.e(\"UploadImage\", \"Error al guardar URL de imagen en la base de datos: $e\")\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n            .addOnFailureListener { e ->\r\n                // Manejar errores durante la subida de la imagen\r\n                msg(\"Error al subir la imagen: ${e.message}\")\r\n            }\r\n    }\r\n    // Método para adquirir una imagen de la gallery\r\n    private fun selectImage() {\r\n        val intent = Intent()\r\n        intent.type = \"image/*\"\r\n        intent.action = Intent.ACTION_GET_CONTENT\r\n        launcherImage.launch(intent)\r\n    }\r\n    // Listener para cuando nos regrese la imagen elegida\r\n    private fun onResultImage() {\r\n        launcherImage = registerForActivityResult(ActivityResultContracts.StartActivityForResult()){ result ->\r\n            if (result.resultCode == AppCompatActivity.RESULT_OK) {\r\n                result.data?.let { intent ->\r\n                    intent.data?.let { uri ->\r\n                        // ya podemos mostrar la imagen en una vista ImageView\r\n                        IvUserAvatar.setImageURI(uri)\r\n                        // vamos a subirla a firebase y adquirir su url\r\n                        // para guardarla en la BDs para visualizarla con picasso\r\n                        // para el futuro\r\n                        uploadImage(uri)\r\n                        (dialog as AlertDialog).dismiss()\r\n                    }\r\n                }\r\n            }else if (result.resultCode == REQUEST_IMAGE_CAPTURE && result.data != null) {\r\n                val imageBitmap = result.data?.extras?.get(\"data\") as Bitmap\r\n                val tempUri = getImageUri(requireContext(), imageBitmap)\r\n                IvUserAvatar.setImageBitmap(imageBitmap)\r\n                uploadImage(tempUri)\r\n            }\r\n        }\r\n    }\r\n    private fun msg(s: String) {\r\n\r\n    }\r\n\r\n    private fun getImageUri(inContext: Context, inImage: Bitmap): Uri {\r\n        val bytes = ByteArrayOutputStream()\r\n        inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes)\r\n        val path = MediaStore.Images.Media.insertImage(inContext.contentResolver, inImage, \"Title\", null)\r\n        return Uri.parse(path)\r\n    }\r\n\r\n\r\n}\r\n\r\n*/
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/net/azarquiel/appgym/ui/AjustesFragment.kt b/app/src/main/java/net/azarquiel/appgym/ui/AjustesFragment.kt
--- a/app/src/main/java/net/azarquiel/appgym/ui/AjustesFragment.kt	
+++ b/app/src/main/java/net/azarquiel/appgym/ui/AjustesFragment.kt	
@@ -1,6 +1,7 @@
 package net.azarquiel.appgym.ui
 
 import android.Manifest
+import android.animation.Animator
 import android.animation.ValueAnimator
 import android.transition.TransitionManager
 import android.app.Activity
@@ -21,6 +22,7 @@
 import android.os.Environment
 import android.provider.MediaStore
 import android.transition.Fade
+import android.transition.Visibility
 import android.util.Log
 import android.view.LayoutInflater
 import android.view.View
@@ -38,6 +40,7 @@
 import androidx.core.app.ActivityCompat
 import androidx.core.content.ContextCompat
 import androidx.core.net.toUri
+import androidx.core.view.get
 import androidx.fragment.app.Fragment
 import com.google.android.material.button.MaterialButton
 import com.google.firebase.auth.FirebaseAuth
@@ -45,6 +48,11 @@
 import com.google.firebase.firestore.FirebaseFirestore
 import com.google.firebase.storage.FirebaseStorage
 import com.squareup.picasso.Picasso
+import kotlinx.coroutines.Dispatchers
+import kotlinx.coroutines.GlobalScope
+import kotlinx.coroutines.delay
+import kotlinx.coroutines.launch
+import kotlinx.coroutines.withContext
 import net.azarquiel.appgym.R
 import net.azarquiel.appgym.databinding.FragmentAjustesBinding
 import java.io.ByteArrayOutputStream
@@ -56,8 +64,9 @@
 import java.util.Locale
 
 class AjustesFragment : Fragment() {
-
+    private var visibility: Int = View.GONE
     private lateinit var datos: ConstraintLayout
+    private lateinit var clajustes: ConstraintLayout
     private lateinit var flecha: ImageView
     private lateinit var binding: FragmentAjustesBinding
     private lateinit var imageUrl: String
@@ -111,23 +120,28 @@
         }
 
         binding.datos1aj.setOnClickListener {
-            expandir(1)
+            visibility=binding.cl1ajustes.visibility
+            expandir(1,visibility)
             isExpanded1 = !isExpanded1
         }
 
         binding.datos2aj.setOnClickListener {
-            expandir(2)
+            visibility=binding.clajustes2.visibility
+            expandir(2,visibility)
             isExpanded2 = !isExpanded2
         }
 
         binding.datos3aj.setOnClickListener {
-            expandir(3)
+            visibility=binding.clajsutes3.visibility
+            expandir(3,visibility)
             isExpanded3 = !isExpanded3
         }
 
         binding.datos4aj.setOnClickListener {
-            expandir(4)
+            visibility=binding.clajsutes4.visibility
+            expandir(4,visibility)
             isExpanded4 = !isExpanded4
+
         }
 
         onResultImage()
@@ -135,44 +149,54 @@
 
 
 
-    private fun expandir(id:Int) {
+    private fun expandir(id:Int, visibility: Int) {
+        val newVisibility = if (visibility == View.VISIBLE) {
+            View.GONE // Si está visible, lo hacemos invisible
+        } else {
+            View.VISIBLE // Si no está visible, lo hacemos visible
+        }
         cerrar2(id)
         when(id){
             1->{
                 datos=binding.datos1aj
                 flecha=binding.flechaDes1
                 isExpanded=isExpanded1
+                clajustes=binding.cl1ajustes
             }
             2->{
                 datos=binding.datos2aj
                 flecha=binding.flechaDes2
                 isExpanded=isExpanded2
+                clajustes=binding.clajustes2
             }
             3->{
                 datos=binding.datos3aj
                 flecha=binding.flechaDes3
                 isExpanded=isExpanded3
+                clajustes=binding.clajsutes3
             }
             4->{
                 datos=binding.datos4aj
                 flecha=binding.flechaDes4
                 isExpanded=isExpanded4
+                clajustes=binding.clajsutes4
             }
         }
+
         // Variable para mantener el estado actual de la animación
         val layoutParams = datos.layoutParams as ConstraintLayout.LayoutParams
 
-        // Calcular la altura final deseada
-        val startHeight = datos.height
-        val endHeight = if (isExpanded) 200 else 500 // Altura final deseada en píxeles
-        val duration = 1000L // Duración de la animación en milisegundos
+        // Altura inicial y final
+        val startHeight = if (isExpanded) ViewGroup.LayoutParams.WRAP_CONTENT else datos.height
+        val endHeight = if (isExpanded) 200 else ViewGroup.LayoutParams.WRAP_CONTENT
+        val duration = 800L // Duración de la animación en milisegundos
 
         // Crear un ValueAnimator para cambiar la altura del ConstraintLayout
         val animator = ValueAnimator.ofInt(startHeight, endHeight)
         animator.duration = duration
 
         // Cambiar la rotación de la flecha
-        val rotation = if (isExpanded) -90f else 0f // Rotación deseada de la flecha
+        val rotation = if (isExpanded) -90f else 0f
         flecha.animate().rotation(rotation).start()
 
         // Actualizar la altura del ConstraintLayout durante la animación
@@ -180,13 +204,25 @@
             val animatedValue = animation.animatedValue as Int
             layoutParams.height = animatedValue
             datos.layoutParams = layoutParams
-
+            clajustes.layoutParams.height = animatedValue // Ajustar también la altura de clajustes
         }
+        //Cambiar visibilidad del contenido al cerrar o abrir
+        cambiarVisibilidadConRetraso(clajustes, newVisibility)
         // Iniciar la animación
         animator.start()
         Log.d("expandir"," "+isExpanded)
     }
 
+    private fun cambiarVisibilidadConRetraso(view: View, newVisibility: Int) {
+        GlobalScope.launch {
+            delay(350) // Retrasar la ejecución durante la duración de la animación
+            withContext(Dispatchers.Main) {
+                // Cambiar la visibilidad en el hilo principal después del retraso
+                view.visibility = newVisibility
+            }
+        }
+    }
+
     private fun cerrar2(id: Int) {
         val expandirIds = arrayOf(1, 2, 3, 4) // IDs de los elementos a expandir
 
@@ -216,10 +252,10 @@
     private fun cerrar(id: Int) {
         // Cerrar el elemento correspondiente
         when (id) {
-            1 -> expandir(1)
-            2 -> expandir(2)
-            3 -> expandir(3)
-            4 -> expandir(4)
+            1 -> expandir(1, binding.cl1ajustes.visibility)
+            2 -> expandir(2, binding.clajustes2.visibility)
+            3 -> expandir(3, binding.clajsutes3.visibility)
+            4 -> expandir(4, binding.clajsutes4.visibility)
         }
     }
     private fun openDialog() {
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveExternalAnnotations\" value=\"false\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/gradle.xml b/.idea/gradle.xml
--- a/.idea/gradle.xml	
+++ b/.idea/gradle.xml	
@@ -4,8 +4,11 @@
   <component name="GradleSettings">
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
+        <option name="testRunner" value="GRADLE" />
+        <option name="distributionType" value="DEFAULT_WRAPPED" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
-        <option name="gradleJvm" value="#GRADLE_LOCAL_JAVA_HOME" />
+        <option name="gradleHome" value="C:/gradle/gradle-7.6.1" />
+        <option name="gradleJvm" value="#JAVA_HOME" />
         <option name="modules">
           <set>
             <option value="$PROJECT_DIR$" />
Index: app/src/main/java/net/azarquiel/appgym/ui/UserCompleteFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package net.azarquiel.appgym.ui\r\n\r\nimport android.content.Context\r\nimport android.content.Context.MODE_PRIVATE\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Button\r\nimport android.widget.TextView\r\nimport com.google.firebase.Firebase\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.FirebaseUser\r\nimport com.google.firebase.auth.auth\r\nimport com.google.firebase.firestore.FirebaseFirestore\r\nimport com.google.firebase.firestore.firestore\r\nimport net.azarquiel.appgym.R\r\nimport net.azarquiel.appgym.model.User\r\nimport net.azarquiel.appgym.view.PrincipalActivity\r\n\r\n\r\nclass UserCompleteFragment : Fragment() {\r\n    private lateinit var datosUserSH: SharedPreferences\r\n    private lateinit var imageUrl: String\r\n    private lateinit var root: View\r\n    private lateinit var btncontinuar: Button\r\n    private lateinit var tvusernamebvnd: TextView\r\n    private var fragment: Fragment?=null\r\n    private  var userFB: FirebaseUser?=null\r\n    private lateinit var auth: FirebaseAuth\r\n    private lateinit var db: FirebaseFirestore\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        root= inflater.inflate(R.layout.fragment_user_complete, container, false)\r\n        return root;\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        auth = Firebase.auth\r\n        db = Firebase.firestore\r\n        tvusernamebvnd=root.findViewById<TextView>(R.id.tvusernamebvnd)\r\n        datosUserSH = requireActivity().getSharedPreferences(\"datosUserSh\", MODE_PRIVATE)\r\n        val username = datosUserSH.getString(\"username\", null)\r\n        if (!username.isNullOrEmpty()) {\r\n            tvusernamebvnd.setText(username)\r\n        }\r\n        getUser()\r\n        btncontinuar=root.findViewById<Button>(R.id.btncontinuar)\r\n        btncontinuar.setOnClickListener {\r\n            Entrarapp()\r\n\r\n        }\r\n    }\r\n\r\n    private fun getUser() {\r\n        // Obtén el usuario autenticado\r\n        val currentUser = auth.currentUser\r\n        userFB=currentUser\r\n        if (userFB != null) {\r\n            val userDocument = userFB?.email?.let { db.collection(\"users\").document(it) }\r\n            userDocument!!.get()\r\n                .addOnSuccessListener { document ->\r\n                    if (document.exists()) {\r\n                        // El documento existe, obtén los datos del usuario\r\n                        imageUrl = document.getString(\"username\")!!\r\n                    } else {\r\n                        // El documento no existe, maneja esta situación según tus requerimientos\r\n                    }\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    // Maneja cualquier error que pueda ocurrir al realizar la consulta\r\n                    Log.w(\"TAG\", \"Error al obtener datos del usuario: \", e)\r\n                }\r\n        } else {\r\n            // El usuario no está autenticado, maneja esta situación según tus requerimientos\r\n        }\r\n    }\r\n\r\n    private fun Entrarapp() {\r\n        val intent = Intent(requireContext(), PrincipalActivity::class.java)\r\n        intent.putExtra(\"userlocal\", userFB)\r\n        intent.putExtra(\"imageUrl\", imageUrl)\r\n        startActivity(intent)\r\n        requireActivity().finish()\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/net/azarquiel/appgym/ui/UserCompleteFragment.kt b/app/src/main/java/net/azarquiel/appgym/ui/UserCompleteFragment.kt
--- a/app/src/main/java/net/azarquiel/appgym/ui/UserCompleteFragment.kt	
+++ b/app/src/main/java/net/azarquiel/appgym/ui/UserCompleteFragment.kt	
@@ -87,7 +87,6 @@
     private fun Entrarapp() {
         val intent = Intent(requireContext(), PrincipalActivity::class.java)
         intent.putExtra("userlocal", userFB)
-        intent.putExtra("imageUrl", imageUrl)
         startActivity(intent)
         requireActivity().finish()
     }
